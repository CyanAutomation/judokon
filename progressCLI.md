QA Report for src/pages/battleCLI.html

| Issue                                                          | Steps to reproduce / observations                                                                                                                                                                                                                                                                                                                                       | Severity                                                                   |
| -------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| **Multiple stat highlights persist across rounds**             | Selecting a stat in one round highlights its row. After the round ends, the highlight remains into the next round instead of resetting. Quickly selecting two stats (e.g. click `Technique` then `Power`) before the round resolves leaves both rows highlighted simultaneously. Highlights accumulate across rounds, causing confusion about the current selection.    | **High** – visual bug; affects clarity and test determinism.               |
| **`Enter`/`Space` “Next” control does not work**               | Acceptance criteria state that pressing `Enter` or `Space` should advance to the next round. In practice, pressing `Enter` or `Space` either before a selection or during the cooldown shows an “Invalid key” message and does not skip the inter‑round countdown.                                                                                                      | **Medium** – departure from specified controls.                            |
| **`Esc` does not close help panel**                            | The PRD specifies that `Esc` closes the help panel. Pressing `Esc` when the shortcuts panel is open does nothing; only another `H` toggles it.                                                                                                                                                                                                                          | **Medium** – accessibility/keyboard control issue.                         |
| **Quit overlay uses native `alert` for win‑target changes**    | Changing the win target prompts a native browser `confirm` dialog. This dialog is not styled or accessible and interrupts keyboard flow (screen‑reader users may not recognize it easily). It also resets the page scroll position.                                                                                                                                     | **Medium** – accessibility concern; could be replaced with a custom modal. |
| **Timer continues during help display and quit confirmation**  | While the help panel is open or the quit confirmation is shown, the header timer continues counting down. The PRD notes that timers should pause on quit confirmation dialogues, and user expectations for help may be to suspend play.                                                                                                                                 | **Low** – minor timing divergence.                                         |
| **Returning to lobby mid‑match shows ambiguous state**         | After pressing `Q` and choosing **Quit**, sometimes a “Play again / Return to lobby” footer appears even when scores indicate the match target hasn’t been reached. It is unclear whether this is the correct game‑over screen.                                                                                                                                         | **Low** – UX inconsistency.                                                |
| **Rapid multi‑input not debounced**                            | The functional requirements call for debouncing rapid multi‑inputs. Rapidly clicking two stats results in multiple selections being registered, highlighting more than one stat.                                                                                                                                                                                        | **Low** – could affect test flakiness.                                     |
| **Persistent highlight after quitting and starting new match** | When quitting mid‑match and starting a new match, previously highlighted stat rows sometimes remain highlighted despite the new match.                                                                                                                                                                                                                                  | **Low** – cosmetic but confusing.                                          |

Improvement opportunities
Reset highlights at the start of each round: Clearing selected classes at the beginning of every round and when starting a new match will prevent multiple highlights persisting across rounds.
Implement Enter/Space behaviour: Support pressing Enter or Space to proceed to the next round immediately after the outcome, bypassing the cooldown, as documented in the PRD.
Ensure Esc closes help and other dialogs: Bind Esc to close the help panel and quit confirmation, matching the keyboard controls specification. Consider unifying help and quit dialogs under a consistent modal component.
Replace native confirmation alerts: Use an in‑page modal for win‑target changes and other confirmations to maintain terminal aesthetics and accessibility. ARIA roles (dialog, aria-modal) and focus trapping will ensure screen‑reader compatibility.
Pause timers during help and confirmation: When help or quit dialogs are open, pause the round timer and resume on close to prevent unintentional timeouts.
Debounce multi‑clicks: Add throttling to prevent multiple quick selections; only the last selection before the timer expires should count.
Clarify game over states: Ensure that “Play again / Return to lobby” only appears when the win target is reached or a quit action is confirmed. Reset scores and highlight states when returning to the lobby.
Expose verbose logs clearly: When the verbose toggle is enabled, display a visible log panel and provide a shortcut to scroll it. Expose timestamps per PRD guidelines.
Improve error messaging: Use the bottom snackbar (#snackbar-container) for hints and invalid input messages instead of replacing the timer text. Keep the timer visible to reduce cognitive load.