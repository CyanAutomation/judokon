QA Report for src/pages/randomJudoka.html

| Issue                                                         | Steps to reproduce / evidence                                                                                                                                                                                                                                                                                                                                                                      | Impact                                                                                                                                                         |
| ------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Screen‑reader announcement uses undefined name**            | After a card is drawn, `displayCard()` calls `announceCard(announcedJudoka.name)`. The judoka objects use `firstname` and `surname` fields; many have no `name` property, causing the announcement “New card drawn: undefined” in the ARIA‑live region.                                                                                                                                            | Accessibility bug—screen readers do not announce the drawn judoka’s name, reducing clarity for blind users and failing to meet ARIA expectations.              |
| **Global motion/sound settings ignored**                      | The code respects OS‑level reduced‑motion via `matchMedia`, but it does not read the global motion or sound preferences from `settings.html`, even though the PRD calls for honoring global sound/motion settings. `applyMotionPreference()` is called for motion, but the `settings.html` value is only used inside the feature‑flags module. No check is made before playing animation or audio. | Users who disable motion or sound in the settings page may still see animations or cannot enable sound; violates PRD tasks 4.1 and 5.0.                        |
| **Audio feedback not implemented**                            | There is no chime or swoosh sound when drawing cards. The PRD lists this as an optional enhancement, but nothing calls an audio API or checks the sound setting.                                                                                                                                                                                                                                   | Reduces sensory feedback and delight; the absence of optional sound may disappoint players expecting celebratory audio.                                        |
| **Judoka card scrolls internally**                            | Many judoka cards are taller than the container; a vertical scrollbar appears inside the card (e.g., Leilani Akiyama’s card has a scroll bar at the right side). This makes stats hidden unless the user scrolls within the card, which is not intuitive for children.                                                                                                                             | Hurts readability and engagement; players may miss important stats or signature moves.                                                                         |
| **Reduced‑motion applied only to animation, not all effects** | The CSS only disables the `.new-card` slide‐in animation under `prefers-reduced-motion`; other transitions (button scale‑in, history panel sliding) still play. The PRD requires all card reveal animations to be disabled when reduced motion is active.                                                                                                                                          | Users with motion sensitivity may still experience subtle motion, causing discomfort.                                                                          |
| **Missing alt text for portrait images**                      | The judoka portraits are inserted via CSS background images or `<img>` tags within `createPortraitSection` (not inspected here), but there is no evidence of `alt` attributes on those images. Without alt text, screen readers cannot describe the portraits.                                                                                                                                     | Minor but reduces accessibility.                                                                                                                               |
| **Draw button label does not localize across states**         | When drawing, the button text changes to “Drawing…” (with an ellipsis). The ARIA label stays constant, but there is no live region announcement that a draw is in progress.                                                                                                                                                                                                                        | Screen‑reader users may not know that loading is happening; adding `aria-busy` helps, but additional ARIA‑live announcements could improve clarity.            |
| **Contrast and tap target validation not verified**           | The code defines large buttons and uses accessible colours, but there is no runtime check of contrast ratios. The PRD (Task 3.1) calls for verifying WCAG AA contrast and tap target sizes.                                                                                                                                                                                                        | Potential accessibility violation if the red or blue colours fail contrast on certain screens; manual/automated checking is needed.                            |
| **Responsiveness not fully tested**                           | On smaller screen widths or landscape mode, the Draw button may not remain above the fixed navigation bar; the PRD requires adjusting layout to keep the button visible. The current layout sets `min-height:50dvh`, but the vertical card may still push the button off‑screen.                                                                                                                   | Could cause frustration if children cannot find the Draw button after rotating the device.                                                                     |

Improvement opportunities
Fix screen‑reader announcements – Modify announceCard() to accept firstname and surname (e.g. announceCard(${judoka.firstname} ${judoka.surname})) or add a name property when constructing judoka objects. Announce “New card drawn: [name]” via an ARIA‑live region, and provide an additional announcement when drawing starts (e.g., “Drawing card…”).
Read motion and sound preferences from settings.html – Import the global settings and disable animations or audio when users have toggled them off. Provide a chime sound (<1 s) that plays only when sound is enabled. This aligns with Tasks 4.1 and 5.1.
Eliminate internal card scrolling – Make the card container tall enough to show all stats, or shrink content. Alternatively, allow vertical expansion and ensure the Draw button stays visible by using CSS flex or grid layouts. Consider summarizing stats in collapsed sections to avoid scroll bars.
Disable all motion effects under reduced‑motion – Wrap slide‑in and scale animations (including the history panel transition and button press animation) in CSS media queries or conditional classes so that they turn off when reduced motion is detected.
Add alt text to portraits – Ensure createPortraitSection() inserts <img alt="Portrait of [name]"> so screen readers can describe images. For silhouettes or unknown portraits, use alt="Portrait placeholder".
Provide stronger feedback for the loading state – Announce that a card is being drawn and consider adding a spinner or progress indicator on the button while disabled. Use aria-live and aria-busy appropriately.
Test contrast and tap targets – Run automated checks or integrate a runtime validator to confirm colours meet WCAG 2.1 AA (≥4.5:1). Ensure buttons remain ≥64 px high on all devices.
Optimize responsiveness – Test the layout across breakpoints (mobile portrait/landscape, tablets). Use min-height and safe‑area insets to guarantee the Draw button and history toggle are always visible above the footer, as outlined in Task 7.1. Add orientation‑based styles if necessary.
Consider deterministic randomization for tests – Expose a seed to getRandomJudoka() via URL or test API for integration tests; ensures repeatable results in Playwright tests.

