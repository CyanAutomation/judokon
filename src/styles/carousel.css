/* Responsive styles for the Judoka Card Carousel */

/* Default styles for desktop */
.card-carousel {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  gap: var(--space-lg); /* Generous whitespace */
  scroll-behavior: smooth; /* Smooth scrolling effect */
  /* Disable native touch scrolling during swipe handling to avoid
     double-advancing pages when both native scroll and programmatic
     paging occur from a single gesture. */
  touch-action: pan-y;
  width: 100%; /* Ensure carousel doesn't exceed container width */
  /* Safari flexbox quirk: set min-width to 0 so container doesn't expand */
  min-width: 0;
  max-width: 100%; /* Prevent overflow */
  flex: 1 1 auto;
  -webkit-overflow-scrolling: touch;
}

/* Card width within the carousel */
.card-carousel .judoka-card {
  /* Use clamp to set a responsive width for judoka cards:
     - Minimum width: 200px ensures cards are not too small on very narrow screens.
     - Preferred width: 60vw adapts to 60% of the viewport width on mobile Safari.
     - Maximum width: 260px matches the fixed width defined on line 24 for larger screens. */
  flex: 0 0 clamp(200px, 60vw, 260px);
}

.judoka-card {
  flex: 0 0 260px;
  scroll-snap-align: center; /* Snap each card to the center */
  transition: transform var(--transition-fast); /* Smooth animations */
  border-radius: var(--radius-lg); /* Rounded corners */
  box-shadow: var(--shadow-base); /* Elevation */
  transform-origin: center center; /* Keep scaling centered on the card */
}

@supports (flex-basis: clamp(1px, 1px, 1px)) {
  .judoka-card {
    flex-basis: clamp(200px, calc(33.33% - var(--space-lg)), 260px);
  }
}

/* Hover effect for desktop */
.judoka-card:hover {
  transform: scale(1.05); /* Interactive feedback */
}

@media (prefers-reduced-motion: reduce) {
  .judoka-card {
    transition: none !important;
  }
}

body[data-test-disable-animations] .judoka-card {
  transition: none !important;
}

/* Styles for tablets */
@media (max-width: 1024px) {
  .judoka-card {
    flex: 0 0 clamp(200px, calc(50% - var(--space-lg)), 260px);
  }
}

/* Styles for mobile */
@media (max-width: 768px) {
  .judoka-card {
    flex: 0 0 clamp(200px, calc(80% - var(--space-sm)), 260px);
  }

  .card-carousel {
    gap: var(--space-sm); /* Compact whitespace */
  }
}

/* Portrait orientation adjustments for larger screens */
@media (orientation: portrait) and (min-width: 769px) {
  .judoka-card {
    flex: 0 0 clamp(200px, calc(80% - var(--space-lg)), 260px);
  }
}

/* Landscape orientation adjustments for larger screens */
@media (orientation: landscape) and (min-width: 769px) {
  .judoka-card {
    flex: 0 0 clamp(200px, calc(50% - var(--space-lg)), 260px);
  }
}

/* Styles for large screens */
@media (min-width: var(--breakpoint-lg)) {
  .judoka-card {
    flex: 0 0 clamp(200px, calc(20% - var(--space-lg)), 260px);
  }
}

/* Active card emphasis */
.card-carousel .judoka-card[aria-current="true"],
.card-carousel .judoka-card.is-active {
  --carousel-active-scale: 1.12;
  transform: scale(var(--carousel-active-scale));
  z-index: 2;
  transition:
    transform 180ms ease-in-out,
    box-shadow 180ms ease-in-out;
  box-shadow: var(--shadow-hover);
}

@media (max-width: 600px) {
  .card-carousel .judoka-card[aria-current="true"],
  .card-carousel .judoka-card.is-active {
    --carousel-active-scale: 1.08; /* Prevent crowding on narrow screens */
  }
}
