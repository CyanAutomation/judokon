QA Report for src/pages/battleClassic.html

| Issue                                                                     | Steps to reproduce                                                                                                                                                                                                                                                                                                    | Expected behaviour                                                                                                                                                                                                                       | Observed behaviour                                                                                                                                       |
| ------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Match never starts**                                                    | Load `battleClassic.html` in a Chrome browser.  The page displays the score‑board header (“Round 0 – You: 0 Opponent: 0”) and two buttons (“Replay”, “Quit”).  There is no modal asking for the 3/5/10 point target.  Clicking **Replay** or **Quit** or pressing **Enter** does nothing, and the match never begins. | On first visit, a modal should ask the player to choose 3/5/10 points, then the match should start automatically with the first card drawn.  If test or headless mode is detected, the game should auto‑start and begin the first round. | No modal appears, and the engine does not start; the game remains stuck on “Round 0”, making it impossible to select stats or progress.                  |
| **Quit flow unresponsive**                                                | With the game in the stuck state above, click **Quit**.                                                                                                                                                                                                                                                               | A confirmation modal should appear to allow the player to confirm or cancel quitting.                                                                                                                                                    | Nothing happens; there is no confirmation dialog and the page remains in the same state.                                                                 |
| **Replay button does nothing**                                            | After loading the page or after finishing a match, click **Replay**.                                                                                                                                                                                                                                                  | The match should reset hands, scores and start a new round.                                                                                                                                                                              | The button is unresponsive; no visible change occurs.                                                                                                    |
| **No way to return to main menu**                                         | In the stuck state, try to navigate away by clicking the logo or using the Main Menu button (not visible).                                                                                                                                                                                                            | A visible “Main Menu” button should allow quitting mid‑match and returning to the home page.                                                                                                                                             | Only “Replay” and “Quit” buttons appear.  The logo is clickable but does not show a confirmation modal; tabbing to it and pressing Enter silently fails. |
| **Stat buttons and card view never render**                               | Wait for a round to start.                                                                                                                                                                                                                                                                                            | Player and opponent cards should appear, with stat buttons (Power, Speed, Technique etc.) available for selection.                                                                                                                       | Only a blank card placeholder is shown on the right; no player card or stat buttons appear, because the match never starts.                              |
| **Accessibility: missing descriptions for stat buttons (cannot confirm)** | Not testable due to match not starting.  When stat buttons eventually render, each should have an `aria-describedby` linking to a short description.                                                                                                                                                                  | N/A (blocked).                                                                                                                                                                                                                           | N/A                                                                                                                                                      |
| **Dataset load failure not surfaced**                                     | If the engine fails to load `judoka.json`, the PRD specifies that an error with a “Retry” option must be shown.                                                                                                                                                                                                       | On failure to load data, the UI should display a message and a retry button.                                                                                                                                                             | In our environment, the match simply does not start, and no error message or retry option is shown.                                                      |

Improvement opportunities
Fix auto‑start logic for automated environments. The round selection modal currently bypasses itself when navigator.webdriver is true (used to detect Playwright). In non‑Playwright automation (e.g., this testing environment), the modal is skipped but the startRoundCycle never runs, leaving the game stuck at round 0. The bootstrapping code should ensure that when the modal is bypassed, the first round is actually scheduled and the UI renders stat buttons. Consider adding robust error handling when judoka data fails to load; surface a user‑friendly message with retry options, as required by the PRD.
Provide a visible Main Menu/Next button. The header controls should always include a Main Menu button that triggers the quit confirmation modal. Currently only Replay and Quit buttons are visible (and inactive). Ensure the Next button is enabled after each round and that Replay resets the match state properly.
Implement end‑of‑match modal. At the end of a match, a modal should display the winner, final scores, and options to replay or quit. The current implementation does not show this due to the match never progressing.
Edge case handling. Add explicit error‑handling hooks for dataset load failure, timer drift (show “Waiting…” and reset), simultaneous inputs and AI failure. During an unexpected error, roll back to the previous round and show an error message instead of leaving the game in an unresponsive state.
Accessibility improvements. Ensure that stat buttons include aria-describedby attributes linking to hidden descriptions for screen‑reader users. Provide tooltips or labels explaining each stat so that children (age 8–12) understand what they represent. Add audio cues (optional) for scoring events and round outcomes to enhance feedback.
Performance instrumentation. Incorporate performance hooks to measure time to first render (target ≤ 500 ms). The large JS bundle (≈ 200 KB) should be lazy‑loaded to improve initial load times. On low‑spec devices, ensure CSS animations use transform and opacity for GPU acceleration as recommended in the PRD.
Testing hooks. Expose deterministic seeds via query parameters or debug panel (enableTestMode) so automated QA can reproduce card draws. Provide a headless fast‑forward mode that eliminates cooldown delays and timer wait times for test automation.
Enhanced replayability. Consider adding subtle animations (card flip, stat highlight) and tooltips on stats to make the experience engaging for younger players. Provide quick instructions before the first match and highlight which stat won after each round.
