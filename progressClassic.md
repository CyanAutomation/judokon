| Issue                                                                                                                                                                                                                                             | Steps to reproduce & evidence                                                                                                                                                                                                                     | Expected behaviour                                                                                                                                                                                                     |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Replay doesn’t reset the round counter**.  Starting a new match via **Replay** sometimes shows “Round 7” with scores reset to 0.                                                                                                                | After finishing a match and clicking **Replay**, the scoreboard shows **You: 0 Opponent: 0** but the round counter continues from the previous game (e.g., Round 7).                                                                              | Replay should fully reset the game state: round number should return to **Round 1** (or 0 before cards are drawn), deck should reset and match length selection should be prompted again.                              |
| **No auto‑advance after cooldown**.  The PRD specifies a 3‑s cooldown between rounds with auto‑progress unless the player presses **Next**.                                                                                                       | After a round ends, the header still displays the result and the **Next** button is enabled.  Waiting more than 3 seconds does not advance the game to the next round; manual clicking of **Next** is required.                                   | The interface should display a short inter‑round countdown and automatically start the next round once the timer finishes.  The **Next** button should allow players to skip the cooldown but should not be mandatory. |
| **“Opponent is choosing…” message missing**.                                                                                                                                                                                                      | Upon selecting a stat, the round result appears immediately.  There is no intermediate “Opponent is choosing…” message and no artificial delay; both player and opponent stats reveal instantly.                                                  | After the player chooses a stat (or auto‑select triggers), the game should display “Opponent is choosing…” in the scoreboard before revealing the opponent’s selection, providing feedback on turn order.              |
| **Hotkeys for stat selection not enabled by default**.                                                                                                                                                                                            | Pressing number keys 1–5 during stat selection has no effect; only clicking works.  The PRD notes a `statHotkeys` flag but it defaults to false, leaving keyboard users without a quick‑access option.                                            | Consider enabling `statHotkeys` by default or providing a settings toggle so keyboard users can choose stats via number keys.                                                                                          |
| **Tab order prioritises header links over stat buttons**.                                                                                                                                                                                         | Pressing **Tab** from the match screen first highlights the home logo link (which navigates away) rather than the stat buttons.  Users must press **Tab** multiple times to reach the primary controls.                                           | The primary interactive elements (stat buttons) should come earlier in the tab order than navigation links to ensure smooth keyboard navigation.                                                                       |
| **Missing “Choose a stat” prompt**.                                                                                                                                                                                                               | The PRD specifies that a snackbar should prompt players to pick a stat.  In practice the header shows only the timer and round number; there is no explicit instruction telling the player to choose a stat.                                      | Add a snackbar or status message (“Choose a stat”) at the start of each round to guide new players.                                                                                                                    |
| **Timer drift handling not visible**.                                                                                                                                                                                                             | The specification requires the timer to display “Waiting…” if drift exceeds 2 s.  During testing there were minor delays (e.g., the timer started at 23 s on first load), but no drift message appeared.                                          | Implement drift detection and display the “Waiting…” message when the UI falls out of sync with engine time.                                                                                                           |
| **Accessibility description not exposed on stat buttons**.                                                                                                                                                                                        | The HTML declares `aria-describ­edby` on stat buttons in the PRD, but the live page’s stat buttons don’t contain any such attributes.  Screen readers therefore announce only the label (e.g., “power”) without describing the stat.              | Include `aria-describedby` attributes pointing to hidden descriptions explaining what each stat represents to assist screen‑reader users.                                                                              |

Improvement opportunities
Align win‑target logic with PRD: adjust Quick/Medium/Long to represent 3, 5 and 10 points, update button tool‑tips accordingly and ensure the match ends at the correct score.
Implement automatic round progression: after showing round results, display a visible countdown (e.g., “Next round in 3 … 2 … 1”) in a snackbar and automatically start the next round. Keep the Next button for impatient players.
Add an “Opponent is choosing…” state: after the player selects a stat, disable stat buttons, update the scoreboard with “Opponent is choosing…”, then reveal the opponent’s card after a short delay. This reinforces turn‑taking and makes AI behaviour clearer.
Improve replay reset: ensure replay resets all game state variables (round count, timer, deck and stats). Optionally prompt the player for a new match length again to avoid confusion.
Enhance keyboard navigation: reorder tab stops so that stat buttons are focused before navigation links. Provide visible focus indicators on all buttons and consider enabling the statHotkeys feature by default for faster keyboard play.
Explicit prompts and audio feedback: display a “Choose a stat” snackbar at the beginning of every round and use optional sound cues to signal wins/losses and the end of the timer, improving engagement for younger players.
Accessibility descriptions: attach aria-describedby attributes to each stat button and include concise descriptions (“Power – strength of throws”, “Speed – quickness of movement”, etc.) to aid screen‑reader users.
Handle timer drift and pausing: implement drift detection logic so that, if the timer is off by more than two seconds, the UI shows “Waiting…” and resynchronises. Ensure the timer pauses when the tab loses focus and resumes correctly when returning to the game.
Responsive design: test and refine the layout on narrow screens (mobile) to ensure stat buttons remain reachable and cards don’t overlap. Consider stacking the opponent card below the player card on small screens.
Test automation hooks: expose deterministic seeds and state progress lists when enableTestMode is true. This will simplify automated testing and debugging without impacting normal gameplay.

## Agent's Review and Recommendations

### Accuracy of Information

All reported issues in the QA report (`progressClassic.md`) have been verified against the codebase (`src/helpers/classicBattle.js`, `src/config/settingsDefaults.js`, `src/pages/battle.html`). The descriptions of the issues, steps to reproduce, and expected behaviors are accurate.

### Feasibility of Fix Plan

The "Improvement opportunities" section outlines a comprehensive and feasible plan for addressing the identified issues. Each proposed fix is achievable within the project's current structure and technologies.

### Additional Opportunities for Improvement

Based on the code review, the following additional recommendations are provided to further enhance the game's quality and maintainability:

*   **Clarify `roundStore.reset()` behavior:** Ensure that the `roundStore.reset()` function explicitly resets the round number to `1` (or `0` before cards are drawn) and that the UI component responsible for displaying the round number is correctly updated after this reset. This will prevent the "Round 7" issue on replay.
*   **Investigate `timer` module for drift handling:** While the `classicBattle.js` doesn't directly handle timer drift display, the `timer` module (likely `src/helpers/timer.js`) should be thoroughly investigated to confirm the presence and correctness of drift detection logic and the "Waiting..." message display. If not fully implemented, prioritize its development.
*   **Implement `tabindex` or reorder HTML for keyboard navigation:** For the tab order issue, consider either strategically using the `tabindex` HTML attribute on interactive elements or, preferably, reordering the HTML structure in `src/pages/battle.html` to place primary interactive elements (stat buttons) earlier in the document flow than navigation links. This improves natural keyboard navigation.
*   **Consider a dedicated `Snackbar` component:** If a reusable `Snackbar` component is not already in place, developing one would streamline the implementation of various prompts and messages (e.g., "Choose a stat", countdowns) across the application, ensuring consistency and reducing code duplication.
*   **Add `aria-live` regions for dynamic updates:** For dynamic UI updates such as the "Opponent is choosing..." message, "Choose a stat" prompt, or round countdowns, implement `aria-live` regions. This will ensure that screen readers automatically announce these changes to visually impaired users, significantly improving accessibility.