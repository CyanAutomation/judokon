QA Report for src/pages/battleClassic.html

| Issue                                                  | Steps to Reproduce                                                                                                                                                                                                              | Expected (from PRD)                                                                                                                   | Actual Behaviour                                                                                                                             |
| ------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| **Opponent card exposed in some sessions**             | Occasionally, when starting a match (especially after pressing **Next** without selecting match length), the opponent’s card is immediately visible. This defeats the suspense and allows the player to inspect the AI’s stats. | The opponent’s card should remain hidden until the player selects a stat.                                                             | Opponent card sometimes loads already revealed, showing stats before the player acts.                                                        |
| **Stat buttons not disabled after selection**          | Select a stat (e.g., power). The selected button turns blue, but all other stat buttons remain red and clickable.                                                                                                               | After choosing a stat, all stat buttons should be disabled until the next round.                                                      | Buttons remain active, allowing multiple clicks; repeated clicks often advance the round counter multiple times or cause inconsistent state. |
| **Missing “You picked X / Opponent chose Y” feedback** | Pick a stat; the scoreboard only shows “You win the round!” or “Tie – no score!” and updates the score.                                                                                                                         | The PRD calls for snackbars or scoreboard messages to show what stat the player picked and the outcome.                               | No message indicates which stat was chosen or the opponent’s value, reducing clarity.                                                        |
| **No “Opponent is choosing…” prompt**                  | After selecting a stat, there is no interim message while the AI selects; the opponent card simply flips with no messaging.                                                                                                     | The scoreboard should display “Opponent is choosing…” during the delay.                                                               | The delay exists, but no message informs the player, so the transition feels abrupt.                                                         |
| **Next button appears disabled but is clickable**      | After a round resolves, the **Next** button is greyed out. Clicking it still skips to the next round.                                                                                                                           | The **Next** button should become enabled only after the cooldown or auto‑progress and should clearly indicate its interactive state. | Grey styling suggests it is disabled, yet it remains clickable, which is confusing.                                                          |
| **Main Menu button not functional**                    | Clicking **Main Menu** appears to do nothing – no navigation or confirmation occurs.                                                                                                                                            | The header logo or Main Menu link should show a confirmation modal and return the user to the home screen.                            | No effect occurs; the user cannot leave the match via Main Menu.                                                                             |
| **Keyboard navigation lacking**                        | Press **Tab** repeatedly; focus jumps to the browser’s address bar rather than cycling through in‑game buttons.                                                                                                                 | Controls and stat buttons should be keyboard‑navigable with appropriate focus indicators【141†L7-L12】.                                 | Stat buttons lack focusable attributes; players using keyboard cannot interact without a mouse.                                              |
| **Timer does not pause on tab‑out**                    | Switch to another browser tab (or simulate by unfocusing) and return; the timer continues counting down.                                                                                                                        | The stat‑selection timer should pause when the page loses focus or the device sleeps.                                                 | Timer keeps decreasing even when the tab is inactive, potentially causing unintended auto‑selects.                                           |
| **Contrast & accessibility gaps**                      | Some red buttons against grey backgrounds provide a contrast ratio that may fall below the 4.5:1 requirement; focus outlines are faint.                                                                                         | The interface must meet WCAG 4.5:1 contrast and accessible touch targets【141†L7-L12】.                                                 | Colour choices (e.g., dark red on grey) and small focus outlines may not meet accessibility guidelines.                                      |
| **Match not finishing properly (unconfirmed)**         | Playing multiple rounds (both wins and ties) sometimes causes the round counter to increase without awarding points, preventing the match from finishing within 25 rounds.                                                      | The match should end when either player reaches the selected point target or after 25 rounds.                                         | The scoreboard sometimes gets stuck on ties, and points remain at 0–1; finishing the match within 25 rounds may not be possible.             |

Improvement opportunities
Disable other stat buttons on selection: Immediately disable all stat buttons once the player chooses a stat to prevent accidental double inputs.
Add clear feedback: Use the snackbar/scoreboard to tell the player “You picked: Speed (8) – Opponent picked: Technique (6) – You win!” as described in the PRD

.
Show “Opponent is choosing…” message: During the AI delay, display the message in #round-message so the user understands what is happening

.
Fix Next button state: Change its appearance when inactive (e.g., opacity 50%) and prevent clicks until the round resolution has completed.
Ensure Main Menu link works: Provide a modal confirmation similar to the Quit flow and actually navigate back to index.html.
Improve keyboard support: Add tabindex attributes and aria-describedby on each stat button, and allow selection via number keys 1–5 (as implied by the optional statHotkeys feature flag). This will support players with limited motor control【141†L7-L12】.
Pause timer on visibility change: Listen for visibilitychange events and pause the countdown when the tab is hidden, resuming on focus, as required by the PRD

.
Accessibility enhancements: Audit colour contrast for buttons and backgrounds; increase focus indicators; ensure buttons meet the ≥44 px touch target guideline【141†L7-L12】.
Better round‑end messaging and animations: Use hardware‑accelerated CSS to animate card flips and scoreboard updates for smoother performance, and provide satisfying audio cues when a point is scored (optional audio feedback in PRD).
Add test hooks & state progress list: Implement the enableTestMode and battleStateProgress feature flags for easier automated testing and debugging, as described in the PRD
